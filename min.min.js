var SPACE,LEFT,RIGHT,UP,DOWN,PI,TAU,LEFT_BUTTON,RIGHT_BUTTON,ESCAPE,TAB,SHIFT,CONTROL,ALT,ENTER,BACKSPACE,RGBA,HSL,HEX,skiJSData;BACKSPACE=8;TAB=9;ENTER=13;SHIFT=16;CONTROL=17;ALT=18;ESCAPE=27;SPACE=32;LEFT=37;RIGHT=39;UP=38;DOWN=40;DEGREES="deg";RADIANS="rad";PI=Math.PI;TAU=PI*2;RGBA="rgba";HSL="hsl";HEX="hex";skiJSData={angle:DEGREES,color:RGBA,rate:60,millis:0,start:0,draw:0};fps=60;function debug(...args){console.debug(...args)}function isEqual(...args){console.assert(...args)}function day(){return(new Date).getDate()}function month(){return(new Date).getMonth()}function year(){return(new Date).getYear()}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function seconds(){return(new Date).getSeconds()}function enableContextMenu(){canvas.oncontextmenu=true}function cursor(name){document.body.style.cursor=name}function smooth(){ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality="high"}function noSmooth(){ctx.imageSmoothingEnabled=false;ctx.imageSmoothingQuality="low"}function noLoop(){skiJSData.draw=draw;draw=0}function loop(){draw=skiJSData.draw||draw}function max(a,b){return a>b?a:b}function min(a,b){return a<b?a:b}function mag(a,b){return Math.sqrt((a**2)+(b**2))}function dist(x1,y1,x2,y2){return mag(x-X,y-Y)}function manhattanDistance(x1,y1,x2,y2){return abs(x1-x2)+abs(y1-y2)}function chebyshevDistance(x1,y1,x2,y2){return max(abs(x1-x2),abs(y1-y2))}function exp(n){return Math.E**n}function norm(val,low,high){return(val-low)/(high-low)}function map(val,a,b,c,d){return c+(d-c)*norm(val,a,b)}function lerp(val,targ,amt){return((targ-val)*amt)+val}function random(min,max){if(max){return Math.random()*(max-min)+min}else if(min){return Math.random()*min}else{return Math.random()}}function constrain(val,low,high){return min(max(val,low),high)}function log(n){return Math.log(n)}function sqrt(n){return Math.sqrt(n)}function sq(n){return n**2}function pow(a,b){return a**b}function abs(n){return n<0? -n:n}function trunc(n){return n|0}function floor(n){return n<0?(n|0)-1:n|0}function ceil(n){return floor(n)+1}function round(n){return n-floor(n)<0.5?floor(n):ceil(n)}function sin(ang){if(skiJSData.angle===DEGREES){ang=degrees(ang)}return Math.sin(ang)}function cos(ang){if(skiJSData.angle===DEGREES){ang=degrees(ang)}return Math.cos(ang)}function tan(ang){if(skiJSData.angle===DEGREES){ang=degrees(ang)}return Math.tan(ang)}function acos(ang){if(skiJSData.angle===DEGREES){ang=degrees(ang)}return Math.acos(ang)}function asin(ang){if(skiJSData.angle===DEGREES){ang=degrees(ang)}return Math.asin(ang)}function atan(ang){ang=Math.atan(ang);if(skiJSData.angle===DEGREES){ang=radians(ang)}return ang}function atan2(y,x){let ang=Math.atan2(y,x);if(skiJSData.angle===DEGREES){ang=radians(ang)}return ang}function radians(ang){return ang*(180/PI)}function degrees(ang){return ang*(PI/180)}function angleMode(mode){skiJSData.angle=mode}function bezierPoint(a,b,c,d,t){return(1-t)*(1-t)*(1-t)*a+3*(1-t)*(1-t)*t*b+3*(1-t)*t*t*c+t*t*t*d}function bezierTangent(a,b,c,d,t){return(3*t*t*(-a+3*b-3*c+d)+6*t*(a-2*b+c)+3*(-a+b))}function colorMode(mode){return skiJSData.color=mode}function color(...args){if(typeof args[0]==="string"&&args.length<=1&&(/(#|rgb|hsl|rgba)/).test(args[0])){return args[0]}args[0]instanceof Array&&(args=args[0]);if(typeof args[1]==="number"&&(/rgb|rgba/).test(args[0])){let cache=args[0].match(/[0-9\.]+(?=(,|\)))/g);args=[cache[0],cache[1],cache[2],args[1]]}switch(skiJSData.color){case RGBA:const[r,g,b,a]=args.length>4?Object.assign(args,{length:4}):args;switch(args.length){case 1:return `rgba(${ r }, ${ r }, ${ r }, 1)`;break;case 2:return `rgba(${ r }, ${ r }, ${ r }, ${g/255})`;break;case 3:return `rgba(${ r }, ${ g }, ${ b }, 1)`;break;case 4:return `rgba(${ r }, ${ g }, ${ b }, ${a/255})`}break;case HSL:return `hsl(${args[0]}, ${args[1]}%, ${args[2]}%)`;break;case HEX:return args[0]}}function lerpColor(color1,color2,amt){if(typeof color1!=="string"||typeof color2!=="string"||skiJSData.color!==RGBA){return}const[r1,g1,b1,a1]=color1.match(/\d{1,3}/g);const[r2,g2,b2,a2]=color2.match(/\d{1,3}/g);return `rgba(${lerp(+r1,+r2,amt)}, ${lerp(+g1,+g2,amt)}, ${lerp(+b1,+b2,amt)}, ${lerp(+a1,+a2,amt)})`}function getImage(src,width,height){return new Promise((resolve,reject)=>{let img=loadImage(src,width,height);img.onload=()=>resolve(img);img.onerror=()=>reject("invalid or unaccessible image source")})}function loadImage(src,width,height){let img;if(width){img=new Image(width,height)}else{img=new Image;}img.src=src;if(!(/khanacademy/).test(src)){img.crossOrigin="anonymous"}return img}function getFont(...fonts){return new Promise((res,rej)=>{const link=loadFont(...fonts);link.onload=()=>res(link);link.onerror=()=>reject("invalid or unaccessible fonts. not rlly, it's just an error lol. idk what went wrong, but you're router or DNS is blockin' fonts.googleapis.com")})}function loadFont(...fonts){const link=document.createElement("link");link.rel="stylesheet";link.href=`https://fonts.googleapis.com/css?family=${fonts.join("|").replace(/ /g,"+")}`;document.body.appendChild(link);return link}function frameRate(rate){skiJSData.rate=rate}function millis(){return skiJSData.millis}frameCount=0;delta=1000/60;then=performance.now();skiJSData.start=performance.now();function raf(time){requestAnimationFrame(raf);delta=time-then;let ms=1000/skiJSData.rate;if(delta<ms){return}let overflow=delta%ms;then=time-overflow;delta-=overflow;draw_standin(time);frameCount+=1;skiJSData.millis=performance.now()-skiJSData.start;fps=1000/delta}Object.defineProperty(window,"draw",{get(){return draw_standin},set(func){typeof draw_standin!=="function"&&requestAnimationFrame(raf);draw_standin=func},configurable:true});for(let i=requestAnimationFrame(()=>0);i-=1;){cancelAnimationFrame(i);}