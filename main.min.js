var width,height,frameCount,frameRate,millis,noStroke,noFill,comp,rect,text,rectMode,ellipseMode,createFont,textAlign,textFont,textSize,strokeCap,strokeJoin,strokeWeight,pushMatrix,popMatrix,translate,rotate,scale,beginShape,vertex,curveVertex,bezierVertex,endShape,curve,bezier,arc,ellipse,quad,triangle,point,line,textWidth,textAscent,textDescent,get,mask,image,mousePressed,mouseReleased,mouseScrolled,mouseClicked,mouseOver,mouseOut,mouseMoved,mouseIsPressed,mouseButton,mouseX,mouseY,pmouseX,pmouseY,keyPressed,keyReleased,keyTyped,key,keyIsPressed,keyCode,resetMatrix,clear,imageMode,arcMode,raf,delta,loadImage,then,draw_standin,startMask,resetMask,getImage,loadFont,noSmooth,textLeading,pushStyle,popStyle,canvas=document.getElementsByTagName("canvas")[0]??new OffscreenCanvas(window.innerWidth,window.innerHeight),ctx=canvas.getContext("2d"),CORNER=0,CENTER=1,CLOSE=!0,SPACE=32,LEFT=37,RIGHT=39,UP=38,DOWN=40,SQUARE="butt",ROUND="round",PROJECT="square",MITER="miter",BEVEL="bevel",DEGREES="deg",RADIANS="rad",PI=Math.PI,TAU=2*PI,RGB="rgb",HSL="hsl",HEX="hex",LEFT_BUTTON=0,RIGHT_BUTTON=2,skiJSData={rect:CENTER,ellipse:CENTER,arc:CENTER,image:CENTER,angle:DEGREES,color:RGB,leading:0,height:12,rate:60,millis:0,start:0,flags:[],fontString(e,t){return(this.flags.includes("bold")?"bold ":"")+(this.flags.includes("italic")?"italic ":"")+t+"px "+e},pos(e,t,a,s,n){return"ellipse"!==e?this[e]<1?[t,a]:[t-s/2,a-n/2]:this[e]<1?[t+s/2,a+s/2]:[t,a]},matrixToArray(t){return["a","b","c","d","e","f"].map(e=>t[e])},matrices:[]},fps=60,shapePathz=[],debug=(...e)=>console.debug(...e),equal=(...e)=>console.assert(...e),day=()=>(new Date).getDate(),month=()=>(new Date).getMonth(),year=()=>(new Date).getYear(),hour=()=>(new Date).getHours(),minute=()=>(new Date).getMinutes(),seconds=()=>(new Date).getSeconds(),enableContextMenu=()=>canvas.oncontextmenu=!0,enableResize=()=>0,cursor=e=>document.body.style.cursor=e,smooth=()=>{ctx.imageSmoothingEnabled=!0;ctx.imageSmoothingQuality="high"},angleMode=e=>skiJSData.angle=e,size=(e,t,a)=>{width=canvas.width=e;height=canvas.height=t;a&&(canvas.style.width=e+"px",canvas.style.height=t+"px")},noLoop=()=>draw=0,set=(...e)=>{switch(e.length){case 0:canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d");return[canvas,ctx];case 1:canvas=e[0];ctx=canvas.getContext("2d");width=canvas.width;height=canvas.height;break;case 2:canvas=new OffscreenCanvas(e[0],e[1]);ctx=canvas.getContext("2d");width=e[0];height=e[1];return[canvas,ctx]}},max=(e,t)=>e<t?t:e,min=(e,t)=>e<t?e:t,mag=(e,t)=>Math.sqrt(e**2+t**2),dist=(e,t,a,s)=>mag(e-a,t-s),exp=e=>Math.E**e,norm=(e,t,a)=>(e-t)/(a-t),map=(e,t,a,s,n)=>s+(n-s)*norm(e,t,a),lerp=(e,t,a)=>(t-e)*a+e,random=(e,t)=>t?Math.random()*(t-e)+e:e?Math.random()*e:Math.random(),constrain=(e,t,a)=>min(max(e,t),a),log=e=>Math.log(e),sqrt=e=>Math.sqrt(e),sq=e=>e**2,pow=(e,t)=>e**t,abs=e=>e<0?-e:e,floor=e=>0|e,ceil=e=>1+(0|e),round=e=>e-(0|e)<.5?0|e:1+(0|e),sin=e=>Math.sin("deg"===skiJSData.angle?degrees(e):e),cos=e=>Math.cos("deg"===skiJSData.angle?degrees(e):e),tan=e=>Math.tan("deg"===skiJSData.angle?degrees(e):e),acos=e=>Math.acos("deg"===skiJSData.angle?degrees(e):e),asin=e=>Math.asin("deg"===skiJSData.angle?degrees(e):e),atan=e=>Math.atan("deg"===skiJSData.angle?degrees(e):e),radians=e=>e*(180/PI),degrees=e=>e*(PI/180),atan2=(e,t)=>"deg"===skiJSData.angle?radians(Math.atan2(e,t)):Math.atan2(t,e),bezierPoint=(e,t,a,s,n)=>(1-n)*(1-n)*(1-n)*e+3*(1-n)*(1-n)*n*t+3*(1-n)*n*n*a+n*n*n*s,bezierTangent=(e,t,a,s,n)=>3*n*n*(3*t-e-3*a+s)+6*n*(e-2*t+a)+3*(-e+t),colorMode=e=>skiJSData.color=e,color=(...e)=>{if("string"==typeof e[0]&&e.length<=1&&/(#|rgb|hsl)/.test(e[0]))return e[0];if("number"==typeof(e=e[0]instanceof Array?e[0]:e)[1]&&/rgb/.test(e[0])){var t=e[0].match(/\d{1,3}/g);e=[t[0],t[1],t[2],e[1]]}switch(skiJSData.color){case"rgb":var[a,s,n,r]=4<e.length?Object.assign(e,{length:4}):e;switch(e.length){case 1:return`rgba(${a}, ${a}, ${a}, 255)`;case 2:return`rgba(${a}, ${a}, ${a}, ${s/255})`;case 3:return`rgba(${a}, ${s}, ${n}, 255)`;case 4:return`rgba(${a}, ${s}, ${n}, ${r/255})`}break;case"hsl":return`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`;case"hex":return e[0]}},background=(...e)=>{var t=[ctx.strokeStyle,ctx.fillStyle];ctx.strokeStyle="rgba(0, 0, 0, 0)",ctx.fillStyle=color(...e);ctx.fillRect(0,0,canvas.width,canvas.height);ctx.strokeStyle=t[0],ctx.fillStyle=t[1]},fill=(...e)=>ctx.fillStyle=color(...e),stroke=(...e)=>ctx.strokeStyle=color(...e),lerpColor=(e,t,a)=>{var s,n,r,o,i,c;if("string"==typeof t&&"string"==typeof e&&skiJSData.color===RGB)return[e,s,n,r]=e.match(/\d{1,3}/g),[t,o,i,c]=t.match(/\d{1,3}/g),`rgba(${lerp(+e,+t,a)}, ${lerp(+s,+o,a)}, ${lerp(+n,+i,a)}, ${lerp(+r,+c,a)})`};clear=()=>ctx.clearRect(0,0,width,height);noStroke=()=>ctx.strokeStyle="rgb(0, 0, 0, 0)";noFill=()=>ctx.fillStyle="rgb(0, 0, 0, 0)";rect=(e,t,a,s,n,r,o,i)=>{[e,t]=skiJSData.pos("rect",e,t,a,s);if(n){var c=a/2,l=s/2;n=c<n||l<n?Math.min(c,l):n;r=c<(r=i?r:n)||l<r?Math.min(c,l):r;o=c<(o=i?o:n)||l<o?Math.min(c,l):o;i=c<(i=i||n)||l<i?Math.min(c,l):i;"rgba(0, 0, 0, 0)"===ctx.strokeStyle&&ctx.translate(.5,.5);beginShape();vertex(e+n,t);vertex(e+a-r,t);curveVertex(e+a,t,e+a,t+r);vertex(e+a,t+s-o);curveVertex(e+a,t+s,e+a-o,t+s);vertex(e+i,t+s);curveVertex(e,t+s,e,t+s-i);vertex(e,t+n);curveVertex(e,t,e+n,t);endShape();"rgba(0, 0, 0, 0)"===ctx.strokeStyle&&ctx.translate(-.5,-.5)}else{ctx.fillRect(e,t,a,s);ctx.strokeRect(e,t,a,s)}};clear=()=>ctx.clearRect(0,0,canvas.width,canvas.height);text=(a,s,n)=>{if((a=a.toString()).match("\n"))a.split("\n").map((e,t)=>{ctx.fillText(e,s,n+(t-(a.split("\n").length-1)/2)*(skiJSData.height+skiJSData.leading));ctx.strokeText(e,s,n+(t-(a.split("\n").length-1)/2)*(skiJSData.height+skiJSData.leading))});else{ctx.fillText(a,s,n);ctx.strokeText(a,s,n)}};rectMode=e=>skiJSData.rect=e;ellipseMode=e=>skiJSData.ellipse=e;arcMode=e=>skiJSData.arc=e;imageMode=e=>skiJSData.image=e;textAlign=(e,t)=>{ctx.textAlign=e<=0?"start":"center";ctx.textBaseline=t<=0?"hanging":"middle"};createFont=e=>e;textSize=e=>skiJSData.height=e&&(ctx.font=skiJSData.fontString(skiJSData.font,e));textFont=(e,t=skiJSData.height)=>{skiJSData.height!==t&&(skiJSData.height=t);skiJSData.flags=[];/bold/i.test(e)&&(skiJSData.flags.push("bold"),e=e.replace("bold",""));/italic/i.test(e)&&(skiJSData.flags.push("italic"),e=e.replace("italic",""));e=e.trim();skiJSData.font=e;ctx.font=skiJSData.fontString(e,t)};textLeading=e=>skiJSData.leading=e;strokeCap=e=>ctx.lineCap=e;strokeJoin=e=>ctx.lineJoin=e;strokeWeight=e=>ctx.lineWidth=e;pushStyle=()=>ctx.save();popStyle=()=>ctx.restore();pushMatrix=()=>{const{matrices:e,matrixToArray:t}=skiJSData;e.push(t(ctx.getTransform()))};resetMatrix=popMatrix=()=>ctx.setTransform(DOMMatrix.fromFloat32Array(new Float32Array(skiJSData.matrices.pop())));translate=(e,t)=>ctx.transform(1,0,0,1,e,t);rotate=e=>{e=degrees(e);const t=Math.cos,a=Math.sin;ctx.transform(t(e),a(e),-a(e),t(e),0,0)};scale=(e,t)=>ctx.transform(e,0,0,t||e,0,0);beginShape=()=>shapePathz=[];vertex=(e,t)=>shapePathz.push({type:"vertex",points:[e,t]});curveVertex=(e,t,a,s)=>shapePathz.push({type:"curve",points:[e,t,a,s]});bezierVertex=(e,t,a,s,n,r)=>shapePathz.push({type:"bezier",points:[e,t,a,s,n,r]});endShape=e=>{const t=shapePathz;if(!(t.length<2||"vertex"!==t[0].type)){ctx.beginPath();t.forEach((e,t)=>ctx[t<1&&"vertex"===e.type?"moveTo":"vertex"===e.type?"lineTo":"curve"===e.type?"quadraticCurveTo":"bezierCurveTo"](...e.points));e&&ctx.closePath();ctx.fill();ctx.stroke()}};curve=(...e)=>{if(6===e.length){var[e,t,a,s,n,r]=e;beginShape();vertex(e,t);curveVertex(a,s,n,r);endShape()}};bezier=(...e)=>{if(8===e.length){var[e,t,a,s,n,r,o,i]=e;beginShape();vertex(e,t);bezierVertex(a,s,n,r,o,i);endShape()}};arc=(e,t,a,s,n,r,o=!1)=>{if(skiJSData.arc){e+=a/2;t+=s/2}ctx.save();ctx.translate(e,t);a!==s&&(s<a?ctx.scale(Math.max(a,s)/Math.min(a,s),1):ctx.scale(1,Math.max(a,s)/Math.min(a,s)));ctx.beginPath();"rgba(0, 0, 0, 0)"!==ctx.fillStyle&&ctx.moveTo(0,0);ctx.arc(0,0,Math.min(a,s)/2,degrees(n),degrees(r));o&&ctx.closePath();ctx.restore();ctx.fill();ctx.stroke()};ellipse=(e,t,a,s)=>{ctx.beginPath();ctx.ellipse(e,t,a/2,s/2,0,0,2*Math.PI);ctx.fill();ctx.stroke()};quad=(e,t,a,s,n,r,o,i)=>{beginShape();vertex(e,t);vertex(a,s);vertex(n,r);vertex(o,i);endShape(CLOSE)};triangle=(e,t,a,s,n,r)=>{beginShape();vertex(e,t);vertex(a,s);vertex(n,r);endShape(CLOSE)};point=(e,t)=>{if("rgba(0, 0, 0, 0)"!==ctx.strokeStyle){var a=[ctx.strokeStyle,ctx.fillStyle];noStroke();ctx.fillStyle=a[0];ellipse(e,t,ctx.lineWidth,ctx.lineWidth);ctx.strokeStyle=a[0];ctx.fillStyle=a[1]}};line=(e,t,a,s)=>{ctx.beginPath();ctx.moveTo(e,t);ctx.lineTo(a,s);ctx.closePath();ctx.stroke()};textWidth=t=>{let a=0;t.split("\n").map(e=>a=max(a,ctx.measureText(t).width));return a};textAscent=()=>ctx.measureText("a").fontBoundingBoxAscent;textDescent=()=>ctx.measureText("a").fontBoundingBoxDescent;textLeading=e=>skiJSData.leading=e;get=(...e)=>{const[t,a,s,n,r]=e;switch(e.length){case 0:get(0,0,width,height);break;case 2:data=ctx.getImageData(t,a,1,1).data;return color(data[0],data[1],data[2],data[3]);case 3:{const o=new OffscreenCanvas(s.width,s.height),ctx=o.getContext("2d");if(s instanceof HTMLImageElement){ctx.drawImage(s,0,0);data=ctx.getImageData(t,a,1,1)}else data=s.getContext("2d").getImageData(t,a,1,1).data;return color(data[0],data[1],data[2],data[3])}case 4:{const i=new OffscreenCanvas(s,n),c=i.getContext("2d");c.putImageData(ctx.getImageData(t,a,s,n),0,0);return i}case 5:{const l=new OffscreenCanvas(r.width,r.height),ctx=l.getContext("2d");ctx.drawImage(r,-t,-a);return l}}};mask=()=>ctx.globalCompositeOperation="source-atop";startMask=resetMask=()=>ctx.globalCompositeOperation="source-over";getImage=(s,n,r)=>new Promise((e,t)=>{const a=Object.assign(n?new Image(n,r):new Image,/khanacademy/.test(s)?{src:s}:{src:s,crossOrigin:"anonymous"});a.onload=()=>e(a);a.onerror=()=>t("invalid or unaccessible image source")});image=(e,t,a,s=e.width,n=e.height)=>{[t,a]=skiJSData.pos("image",t,a,s,n);ctx[e instanceof ImageData?"putImageData":"drawImage"](e,t,a,s,n)};loadImage=(e,t,a)=>Object.assign(t?new Image(t,a):new Image,/khanacademy/.test(e)?{src:e}:{src:e,crossOrigin:"anonymous"});loadFont=(...e)=>{e=Object.assign(document.createElement("link"),{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family="+e.join("|").replace(/ /g,"+")});document.body.appendChild(e);return e};mousePressed=()=>{};mouseReleased=()=>{};mouseScrolled=()=>{};mouseClicked=()=>{};mouseOut=()=>{};mouseOver=()=>{};mouseIsPressed=!(mouseMoved=()=>{});mouseButton=LEFT_BUTTON;pmouseX=mouseX=0;pmouseY=mouseY=0;canvas.onmousedown=e=>{mousePressed(e);mouseIsPressed=!0;mouseButton=e.button};canvas.onmousemove=e=>{var t=canvas.getBoundingClientRect();pmouseX=mouseX;pmouseY=mouseY;mouseX=constrain(e.pageX-t.x,0,width);mouseY=constrain(e.pageY-t.y,0,height);mouseMoved(e)};canvas.onmouseup=e=>{mouseReleased(e);mouseClicked(e);mouseButton=e.button;mouseIsPressed=!1;e.preventDefault()};canvas.oncontextmenu=e=>e.preventDefault();canvas.onmouseover=e=>{e.preventDefault();mouseOver(e)};canvas.onmouseout=e=>{e.preventDefault();mouseOut(e)};canvas.onwheel=e=>{e.preventDefault();mouseScrolled(e)};keyPressed=()=>{};keyReleased=()=>{};keyTyped=()=>{};document.onkeydown=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyIsPressed=!0;keyPressed(e)};document.onkeyup=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyReleased(e)};document.onkeypress=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyTyped(e)};frameCount=0;frameRate=e=>skiJSData.rate=e;millis=()=>skiJSData.millis;delta=1e3/60;then=performance.now();skiJSData.start=performance.now();raf=e=>{requestAnimationFrame(raf);delta=e-then;var t=1e3/skiJSData.rate;if(!(delta<t)){t=delta%t;then=e-t;delta-=t;draw_standin(e);frameCount+=1;skiJSData.millis=performance.now()-skiJSData.start;fps=1e3/delta}};Object.defineProperty(window,"draw",{get(){return draw_standin},set(e){"function"!=typeof draw_standin&&requestAnimationFrame(raf);draw_standin=e},configurable:!0});size(window.innerWidth,window.innerHeight);for(let e=requestAnimationFrame(()=>0);e--;)cancelAnimationFrame(e);
