var width,height,frameCount,frameRate,millis,noStroke,noFill,comp,rect,text,rectMode,ellipseMode,createFont,textAlign,textFont,textSize,strokeCap,strokeJoin,strokeWeight,pushMatrix,popMatrix,translate,rotate,scale,beginShape,vertex,curveVertex,bezierVertex,endShape,curve,bezier,arc,ellipse,quad,triangle,point,line,textWidth,textAscent,textDescent,get,mask,image,mousePressed,mouseReleased,mouseScrolled,mouseClicked,mouseOver,mouseOut,mouseMoved,mouseIsPressed,mouseButton,mouseX,mouseY,pmouseX,pmouseY,keyPressed,keyReleased,keyTyped,key,keyIsPressed,keyCode,resetMatrix,clear,Canvas,imageMode,arcMode,raf,delta,loadImage,then,draw_standin,startMask,resetMask,getImage,canvas=document.getElementsByTagName("canvas")[0]??new OffscreenCanvas(window.innerWidth,window.innerHeight),ctx=canvas.getContext("2d"),CORNER=0,CENTER=1,CLOSE=!0,LEFT=37,RIGHT=39,UP=38,DOWN=40,SQUARE="butt",ROUND="round",PROJECT="square",MITER="miter",BEVEL="bevel",DEGREES="deg",RADIANS="rad",RGB="rgb",HSL="hsl",HEX="hex",left=0,right=2,data={rect:1,ellipse:1,height:12,angle:"deg",rate:60,millis:0,start:0,flags:[],comp:(e,t)=>(data.flags.includes("bold")?"bold ":"")+(data.flags.includes("italic")?"italic ":"")+t+"px "+e,color:"rgb"},fps=60,pathz=[],debug=(...e)=>console.debug(...e),equal=(...e)=>console.assert(...e),day=()=>(new Date).getDate(),month=()=>(new Date).getMonth(),year=()=>(new Date).getYear(),hour=()=>(new Date).getHours(),minute=()=>(new Date).getMinutes(),seconds=()=>(new Date).getSeconds(),enableContextMenu=()=>canvas.oncontextmenu=!0,cursor=e=>document.body.style.cursor=e,smooth=()=>{ctx.imageSmoothingEnabled=!0;ctx.imageSmoothingQuality="high"},angleMode=e=>data.angle=e,size=(e,t,a)=>{width=canvas.width=e;height=canvas.height=t;a&&(canvas.style.width=e+"px",canvas.style.height=t+"px")},noLoop=()=>draw=0,set=(...e)=>{switch(e.length){case 0:canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d");return[canvas,ctx];case 1:canvas=e[0];ctx=canvas.getContext("2d");width=canvas.width;height=canvas.height;break;case 2:canvas=new OffscreenCanvas(e[0],e[1]);ctx=canvas.getContext("2d");width=e[0];height=e[1];return[canvas,ctx]}},max=(e,t)=>e<t?t:e,min=(e,t)=>e<t?e:t,mag=(e,t)=>Math.sqrt(e**2+t**2),dist=(e,t,a,r)=>mag(e-a,t-r),exp=e=>Math.E**e,norm=(e,t,a)=>(e-t)/(a-t),map=(e,t,a,r,s)=>r+(s-r)*norm(e,t,a),lerp=(e,t,a)=>(t-e)*a+e,random=(e,t)=>t?Math.random()*(t-e)+e:e?Math.random()*e:Math.random(),constrain=(e,t,a)=>min(max(e,t),a),log=e=>Math.log(e),sqrt=e=>Math.sqrt(e),sq=e=>e**2,pow=(e,t)=>e**t,abs=e=>e<0?-e:e,floor=e=>0|e,ceil=e=>1+(0|e),round=e=>e-(0|e)<.5?0|e:1+(0|e),sin=e=>Math.sin(degrees(e)),cos=e=>Math.cos(degrees(e)),tan=e=>Math.tan(degrees(e)),acos=e=>Math.acos(degrees(e)),asin=e=>Math.asin(degrees(e)),atan=e=>Math.atan(degrees(e)),radians=e=>e*(180/Math.PI),degrees=e=>e*(Math.PI/180),atan2=(e,t)=>radians(Math.atan2(e,t)),bezierPoint=(e,t,a,r,s)=>(1-s)*(1-s)*(1-s)*e+3*(1-s)*(1-s)*s*t+3*(1-s)*s*s*a+s*s*s*r,bezierTangent=(e,t,a,r,s)=>3*s*s*(3*t-e-3*a+r)+6*s*(e-2*t+a)+3*(-e+t),colorMode=e=>data.color=e,color=(...e)=>{if("string"==typeof e[0]&&e.length<1&&/(#|rgb|hsl)/.test(e[0]))return e[0];if("number"==typeof(e=e[0]instanceof Array?e[0]:e)[1]&&/rgb/.test(e[0])){var t=e[0].match(/\d{1,3}/g);e=[t[0],t[1],t[2],e[1]]}switch(data.color){case"rgb":var[a,r,s,n]=4<e.length?Object.assign(e,{length:4}):e;switch(e.length){case 1:return`rgba(${a}, ${a}, ${a}, 255)`;case 2:return`rgba(${a}, ${a}, ${a}, ${r/255})`;case 3:return`rgba(${a}, ${r}, ${s}, 255)`;case 4:return`rgba(${a}, ${r}, ${s}, ${n/255})`}break;case"hsl":return`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`;case"hex":return e[0]}},background=(...e)=>{var t=[ctx.strokeStyle,ctx.fillStyle];ctx.strokeStyle="rgba(0, 0, 0, 0)",ctx.fillStyle=color(...e);ctx.fillRect(0,0,canvas.width,canvas.height);ctx.strokeStyle=t[0];ctx.fillStyle=t[1]},fill=(...e)=>ctx.fillStyle=color(...e),stroke=(...e)=>ctx.strokeStyle=color(...e),lerpColor=(e,t,a)=>{var r,s,n,o,c,i;if("string"==typeof t&&"string"==typeof e&&data.color===RGB)return[e,r,s,n]=e.match(/\d{1,3}/g),[t,o,c,i]=t.match(/\d{1,3}/g),`rgba(${lerp(+e,+t,a)}, ${lerp(+r,+o,a)}, ${lerp(+s,+c,a)}, ${lerp(+n,+i,a)})`};clear=()=>ctx.clearRect(0,0,width,height);noStroke=()=>ctx.strokeStyle="rgb(0, 0, 0, 0)";noFill=()=>ctx.fillStyle="rgb(0, 0, 0, 0)";comp=(e,t,a,r,s)=>0<data[s]?[e-a/2,t-r/2]:[e,t];rect=(e,t,a,r,s,n,o,c)=>{[e,t]=comp(e,t,a,r,"rect");if(s){var i=a/2,l=r/2;s=i<s||l<s?Math.min(i,l):s;n=i<(n=c?n:s)||l<n?Math.min(i,l):n;o=i<(o=c?o:s)||l<o?Math.min(i,l):o;c=i<(c=c||s)||l<c?Math.min(i,l):c;"rgba(0, 0, 0, 0)"===ctx.strokeStyle&&ctx.translate(.5,.5);beginShape();vertex(e+s,t);vertex(e+a-n,t);curveVertex(e+a,t,e+a,t+n);vertex(e+a,t+r-o);curveVertex(e+a,t+r,e+a-o,t+r);vertex(e+c,t+r);curveVertex(e,t+r,e,t+r-c);vertex(e,t+s);curveVertex(e,t,e+s,t);endShape();"rgba(0, 0, 0, 0)"===ctx.strokeStyle&&ctx.translate(-.5,-.5)}else{ctx.fillRect(e,t,a,r);ctx.strokeRect(e,t,a,r)}};clear=()=>ctx.clearRect(0,0,canvas.width,canvas.height);text=(a,r,s)=>{if((a=Object.is(typeof a,"string")?a:a.toString()).match("\n"))a.split("\n").map((e,t)=>{ctx.fillText(e,r,s+(t-(a.split("\n").length-1)/2)*data.height);ctx.strokeText(e,r,s+(t-(a.split("\n").length-1)/2)*data.height)});else{ctx.fillText(a,r,s);ctx.strokeText(a,r,s)}};rectMode=e=>data.rect=e;ellipseMode=e=>data.ellipse=e;arcMode=e=>data.arc=e;imageMode=e=>data.image=e;textAlign=(e,t)=>{ctx.textAlign=e<=0?"start":"center";ctx.textBaseline=t<=0?"alphabetic":"middle"};createFont=e=>e;textSize=e=>data.height=e&&(ctx.font=data.comp(data.font,e));textFont=(e,t=data.height)=>{data.height!==t&&(data.height=t);data.flags=[];/bold/i.test(e)&&(data.flags.push("bold"),e=e.replace("bold",""));/italic/i.test(e)&&(data.flags.push("italic"),e=e.replace("italic",""));e=e.trim();data.font=e;ctx.font=data.comp(e,t)};strokeCap=e=>ctx.lineCap=e;strokeJoin=e=>ctx.lineJoin=e;strokeWeight=e=>ctx.lineWidth=Number(e);pushMatrix=()=>ctx.save();resetMatrix=popMatrix=()=>ctx.restore();translate=(e,t)=>ctx.translate(e,t);rotate=e=>ctx.rotate(degrees(e));scale=(e,t)=>ctx.scale(e,t||e);beginShape=()=>pathz=[];vertex=(e,t)=>pathz.push({type:"vertex",points:[e,t]});curveVertex=(e,t,a,r)=>pathz.push({type:"curve",points:[e,t,a,r]});bezierVertex=(e,t,a,r,s,n)=>pathz.push({type:"bezier",points:[e,t,a,r,s,n]});endShape=e=>{const t=pathz;if(!(t.length<2||"vertex"!==t[0].type)){ctx.beginPath();t.forEach((e,t)=>ctx[t<1&&"vertex"===e.type?"moveTo":"vertex"===e.type?"lineTo":"curve"===e.type?"quadraticCurveTo":"bezierCurveTo"](...e.points));e&&ctx.closePath();ctx.fill();ctx.stroke()}};curve=(...e)=>{if(6===e.length){var[e,t,a,r,s,n]=e;beginShape();vertex(e,t);curveVertex(a,r,s,n);endShape()}};bezier=(...e)=>{if(8===e.length){var[e,t,a,r,s,n,o,c]=e;beginShape();vertex(e,t);bezierVertex(a,r,s,n,o,c);endShape()}};arc=(e,t,a,r,s,n,o=!1)=>{if(data.arc){e+=a/2;t+=r/2}ctx.save();ctx.translate(e,t);a!==r&&(r<a?ctx.scale(Math.max(a,r)/Math.min(a,r),1):ctx.scale(1,Math.max(a,r)/Math.min(a,r)));ctx.beginPath();"rgba(0, 0, 0, 0)"!==ctx.fillStyle&&ctx.moveTo(0,0);ctx.arc(0,0,Math.min(a,r)/2,degrees(s),degrees(n));o&&ctx.closePath();ctx.restore();ctx.fill();ctx.stroke()};ellipse=(e,t,a,r)=>{ctx.beginPath();ctx.ellipse(e,t,a/2,r/2,0,0,2*Math.PI);ctx.fill();ctx.stroke()};quad=(e,t,a,r,s,n,o,c)=>{beginShape();vertex(e,t);vertex(a,r);vertex(s,n);vertex(o,c);endShape(CLOSE)};triangle=(e,t,a,r,s,n)=>{beginShape();vertex(e,t);vertex(a,r);vertex(s,n);endShape(CLOSE)};point=(e,t)=>{if(!Object.is(ctx.strokeStyle,"rgba(0, 0, 0, 0)")){var a=ctx.strokeStyle,r=ctx.fillStyle;noStroke();ctx.fillStyle=a;ellipse(e,t,ctx.lineWidth,ctx.lineWidth);ctx.strokeStyle=a;ctx.fillStyle=r}};line=(e,t,a,r)=>{ctx.beginPath();ctx.moveTo(e,t);ctx.lineTo(a,r);ctx.closePath();ctx.stroke()};textWidth=t=>{let a=0;t.split("\n").map(e=>a=max(a,ctx.measureText(t).width));return a};textAscent=()=>ctx.measureText("a").fontBoundingBoxAscent;textDescent=()=>ctx.measureText("a").fontBoundingBoxDescent;Canvas=(e,t)=>{const a=Object.assign(document.createElement("canvas"),{width:e,height:t});return[a,a.getContext("2d")]};get=(...e)=>{const[t,a,r,s,n]=e;let o,c,i,l;switch(e.length){case 0:get(0,0,width,height);break;case 2:c=ctx.getImageData(t,a,1,1).data;return color(c[0],c[1],c[2],c[3]);case 3:l=Canvas(r.width,r.height);i=l[1];if(r instanceof HTMLImageElement){i.drawImage(r,0,0);c=i.getImageData(t,a,1,1)}else c=r.getContext("2d").getImageData(t,a,1,1).data;return color(c[0],c[1],c[2],c[3]);case 4:o=(l=Canvas(r,s))[0];(i=l[1]).putImageData(ctx.getImageData(t,a,r,s),0,0);return o;case 5:l=Canvas(n.width,n.height);(i=l[1]).drawImage(n,-t,-a);return l[0];default:return}};mask=()=>ctx.globalCompositeOperation="source-atop";startMask=resetMask=()=>ctx.globalCompositeOperation="source-over";getImage=(r,s,n)=>new Promise((e,t)=>{const a=Object.assign(s?new Image(s,n):new Image,/khanacademy/.test(r)?{src:r}:{src:r,crossOrigin:"anonymous"});a.onload=()=>e(a);a.onerror=()=>t("invalid or unaccessible image source")});image=async function(e,t,a,r=e.width,s=e.height){data.image&&(t-=r/2,a-=s/2);"function"==typeof e?.then?await e.then(e=>ctx.drawImage(e,t,a,r??e.width,s??e.height)):ctx[e instanceof ImageData?"putImageData":"drawImage"](e,t,a,r,s)};loadImage=(e,t,a)=>Object.assign(t?new Image(t,a):new Image,/khanacademy/.test(e)?{src:e}:{src:e,crossOrigin:"anonymous"});mousePressed=()=>{};mouseReleased=()=>{};mouseScrolled=()=>{};mouseClicked=()=>{};mouseOut=()=>{};mouseOver=()=>{};mouseIsPressed=!(mouseMoved=()=>{});mouseButton=left;pmouseX=mouseX=0;pmouseY=mouseY=0;canvas.onmousedown=e=>{mousePressed(e);mouseIsPressed=!0;mouseButton=e.button};canvas.onmousemove=e=>{pmouseX=mouseX;pmouseY=mouseY;mouseX=e.pageX;mouseY=e.pageY;mouseMoved(e)};canvas.onmouseup=e=>{mouseReleased(e);mouseClicked(e);mouseButton=e.button;mouseIsPressed=!1;e.preventDefault()};canvas.oncontextmenu=e=>e.preventDefault();canvas.onmouseover=e=>{e.preventDefault();mouseOver(e)};canvas.onmouseout=e=>{e.preventDefault();mouseOut(e)};canvas.onwheel=e=>{e.preventDefault();mouseScrolled(e)};keyPressed=()=>{};keyReleased=()=>{};keyTyped=()=>{};document.onkeydown=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyIsPressed=!0;keyPressed(e)};document.onkeyup=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyReleased(e)};document.onkeypress=e=>{e.preventDefault();key=e.key;keyCode=e.keyCode;keyTyped(e)};frameCount=0;frameRate=e=>data.rate=e;millis=()=>data.millis;delta=1e3/60;then=performance.now();data.start=performance.now();raf=e=>{requestAnimationFrame(raf);delta=e-then;var t=1e3/data.rate;if(!(delta<t)){t=delta%t;then=e-t;delta-=t;draw_standin(e);frameCount+=1;data.millis=performance.now()-data.start;fps=1e3/delta}};Object.defineProperty(window,"draw",{get(){return draw_standin},set(e){"function"!=typeof draw_standin&&requestAnimationFrame(raf);draw_standin=e},configurable:!0});size(window.innerWidth,window.innerHeight);for(var i=requestAnimationFrame(()=>0);i--;)cancelAnimationFrame(i);
